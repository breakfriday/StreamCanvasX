{"version":3,"sources":["./src/constant/index.ts"],"sourcesContent":["// 播放协议\nexport const PLAYER_PLAY_PROTOCOL = {\n    websocket: 0,\n    fetch: 1,\n    webrtc: 2,\n};\n\nexport const DEMUX_TYPE = {\n    flv: 'flv',\n    m7s: 'm7s',\n};\n\nexport const FILE_SUFFIX = {\n    mp4: 'mp4',\n    webm: 'webm',\n};\n\nexport const MEDIA_SOURCE_UPDATE_END_TIMEOUT = 10 * 1000;\n\n\n// default player options\nexport const DEFAULT_PLAYER_OPTIONS = {\n    videoBuffer: 1000, // 1000ms  1 second\n    videoBufferDelay: 1000, // 1000ms\n    isResize: true,\n    isFullResize: false, //\n    isFlv: false,\n    debug: false,\n    hotKey: false, // 快捷键\n    loadingTimeout: 10, // loading timeout\n    heartTimeout: 5, // heart timeout\n    timeout: 10, // second\n    loadingTimeoutReplay: true, // loading timeout replay. default is true\n    heartTimeoutReplay: true, // heart timeout replay.\n    loadingTimeoutReplayTimes: 3, // loading timeout replay fail times\n    heartTimeoutReplayTimes: 3, // heart timeout replay fail times\n    supportDblclickFullscreen: false, // support double click toggle fullscreen\n    showBandwidth: false, // show band width\n    keepScreenOn: false, //\n    isNotMute: false, //\n    hasAudio: true, //  has audio\n    hasVideo: true, // has video\n    operateBtns: {\n        fullscreen: false,\n        screenshot: false,\n        play: false,\n        audio: false,\n        record: false,\n    },\n    controlAutoHide: false, // control auto hide\n    hasControl: false,\n    loadingText: '', // loading Text\n    background: '',\n    decoder: 'decoder.js',\n    url: '', // play url\n    rotate: 0, //\n    // text: '',\n    forceNoOffscreen: true, // 默认是不采用\n    hiddenAutoPause: false, //\n    protocol: PLAYER_PLAY_PROTOCOL.fetch,\n    demuxType: DEMUX_TYPE.flv, // demux type\n    useWCS: false, //\n    wcsUseVideoRender: true, // 默认设置为true\n    useMSE: false, //\n    useOffscreen: false, //\n    autoWasm: true, // 自动降级到 wasm 模式\n    wasmDecodeErrorReplay: true, // 解码失败重新播放。\n    openWebglAlignment: false, //  https://github.com/langhuihui/jessibuca/issues/152\n    wasmDecodeAudioSyncVideo: false, // wasm 解码之后音视频同步\n    recordType: FILE_SUFFIX.webm,\n    useWebFullScreen: false, // use web full screen\n};\n\n\nexport const WORKER_CMD_TYPE = {\n    init: 'init',\n    initVideo: 'initVideo',\n    render: 'render',\n    playAudio: 'playAudio',\n    initAudio: 'initAudio',\n    kBps: 'kBps',\n    decode: 'decode',\n    audioCode: 'audioCode',\n    videoCode: 'videoCode',\n    wasmError: 'wasmError',\n};\n\nexport const WASM_ERROR = {\n    invalidNalUnitSize: 'Invalid NAL unit size',\n    // errorSplittingTheInputIntoNALUnits: 'Error splitting the input into NAL units'\n};\n\nexport const MEDIA_TYPE = {\n    audio: 1,\n    video: 2,\n};\n\nexport const FLV_MEDIA_TYPE = {\n    audio: 8,\n    video: 9,\n};\n\nexport const WORKER_SEND_TYPE = {\n    init: 'init',\n    decode: 'decode',\n    audioDecode: 'audioDecode',\n    videoDecode: 'videoDecode',\n    close: 'close',\n    updateConfig: 'updateConfig',\n};\n\n\n//\nexport const EVENTS = {\n    fullscreen: 'fullscreen$2',\n    webFullscreen: 'webFullscreen',\n    decoderWorkerInit: 'decoderWorkerInit',\n    play: 'play',\n    playing: 'playing',\n    pause: 'pause',\n    mute: 'mute',\n    load: 'load',\n    loading: 'loading',\n    videoInfo: 'videoInfo',\n    timeUpdate: 'timeUpdate',\n    audioInfo: 'audioInfo',\n    log: 'log',\n    error: 'error',\n    kBps: 'kBps',\n    timeout: 'timeout',\n    delayTimeout: 'delayTimeout',\n    loadingTimeout: 'loadingTimeout',\n    stats: 'stats',\n    performance: 'performance',\n    record: 'record',\n    recording: 'recording',\n    recordingTimestamp: 'recordingTimestamp',\n    recordStart: 'recordStart',\n    recordEnd: 'recordEnd',\n    recordCreateError: 'recordCreateError',\n    buffer: 'buffer',\n    videoFrame: 'videoFrame',\n    start: 'start',\n    metadata: 'metadata',\n    resize: 'resize',\n    streamEnd: 'streamEnd',\n    streamSuccess: 'streamSuccess',\n    streamMessage: 'streamMessage',\n    streamError: 'streamError',\n    volumechange: 'volumechange',\n    destroy: 'destroy',\n    mseSourceOpen: 'mseSourceOpen',\n    mseSourceClose: 'mseSourceClose',\n    mseSourceBufferError: 'mseSourceBufferError',\n    mseSourceBufferBusy: 'mseSourceBufferBusy',\n    mseSourceBufferFull: 'mseSourceBufferFull',\n    videoWaiting: 'videoWaiting',\n    videoTimeUpdate: 'videoTimeUpdate',\n    videoSyncAudio: 'videoSyncAudio',\n    playToRenderTimes: 'playToRenderTimes',\n};\n\n\nexport const JESSIBUCA_EVENTS = {\n    load: EVENTS.load,\n    timeUpdate: EVENTS.timeUpdate,\n    videoInfo: EVENTS.videoInfo,\n    audioInfo: EVENTS.audioInfo,\n    error: EVENTS.error,\n    kBps: EVENTS.kBps,\n    log: EVENTS.log,\n    start: EVENTS.start,\n    timeout: EVENTS.timeout,\n    loadingTimeout: EVENTS.loadingTimeout,\n    delayTimeout: EVENTS.delayTimeout,\n    fullscreen: 'fullscreen',\n    webFullscreen: EVENTS.webFullscreen,\n    play: EVENTS.play,\n    pause: EVENTS.pause,\n    mute: EVENTS.mute,\n    stats: EVENTS.stats,\n    volumechange: EVENTS.volumechange,\n    performance: EVENTS.performance,\n    recordingTimestamp: EVENTS.recordingTimestamp,\n    recordStart: EVENTS.recordStart,\n    recordEnd: EVENTS.recordEnd,\n    playToRenderTimes: EVENTS.playToRenderTimes,\n};\n\nexport const EVENTS_ERROR = {\n    playError: 'playIsNotPauseOrUrlIsNull',\n    fetchError: 'fetchError',\n    websocketError: 'websocketError',\n    webcodecsH265NotSupport: 'webcodecsH265NotSupport',\n    webcodecsDecodeError: 'webcodecsDecodeError',\n    webcodecsWidthOrHeightChange: 'webcodecsWidthOrHeightChange',\n    mediaSourceH265NotSupport: 'mediaSourceH265NotSupport',\n    mediaSourceFull: EVENTS.mseSourceBufferFull,\n    mseSourceBufferError: EVENTS.mseSourceBufferError,\n    mediaSourceAppendBufferError: 'mediaSourceAppendBufferError',\n    mediaSourceBufferListLarge: 'mediaSourceBufferListLarge',\n    mediaSourceAppendBufferEndTimeout: 'mediaSourceAppendBufferEndTimeout',\n    wasmDecodeError: 'wasmDecodeError',\n    webglAlignmentError: 'webglAlignmentError',\n};\n\n\nexport const WEBSOCKET_STATUS = {\n    notConnect: 'notConnect',\n    open: 'open',\n    close: 'close',\n    error: 'error',\n};\n\nexport const BUFFER_STATUS = {\n    empty: 'empty',\n    buffering: 'buffering',\n    full: 'full',\n};\n\n\nexport const SCREENSHOT_TYPE = {\n    download: 'download',\n    base64: 'base64',\n    blob: 'blob',\n};\n\n\nexport const VIDEO_ENC_TYPE = {\n    7: 'H264(AVC)', //\n    12: 'H265(HEVC)', //\n};\n\nexport const VIDEO_ENC_CODE = {\n    h264: 7,\n    h265: 12,\n};\n\n\nexport const AUDIO_ENC_TYPE = {\n    10: 'AAC',\n    7: 'ALAW',\n    8: 'MULAW',\n};\n\nexport const H265_NAL_TYPE = {\n    vps: 32,\n    sps: 33,\n    pps: 34,\n};\n\nexport const CONTROL_HEIGHT = 38;\n\nexport const SCALE_MODE_TYPE = {\n    full: 0, //  视频画面完全填充canvas区域,画面会被拉伸\n    auto: 1, // 视频画面做等比缩放后,高或宽对齐canvas区域,画面不被拉伸,但有黑边\n    fullAuto: 2, // 视频画面做等比缩放后,完全填充canvas区域,画面不被拉伸,没有黑边,但画面显示不全\n};\n\n\nexport const CANVAS_RENDER_TYPE = {\n    webcodecs: 'webcodecs',\n    webgl: 'webgl',\n    offscreen: 'offscreen',\n};\n\nexport const ENCODED_VIDEO_TYPE = {\n    key: 'key',\n    delta: 'delta',\n};\n\n\nexport const MP4_CODECS = {\n    avc: 'video/mp4; codecs=\"avc1.64002A\"',\n    hev: 'video/mp4; codecs=\"hev1.1.6.L123.b0\"',\n};\n\n\nexport const MEDIA_SOURCE_STATE = {\n    ended: 'ended',\n    open: 'open',\n    closed: 'closed',\n};\n\n\n// frag duration\nexport const FRAG_DURATION = Math.ceil(1000 / 25);\n\n\nexport const AUDIO_SYNC_VIDEO_DIFF = 1000;\n\n\nexport const HOT_KEY = {\n    esc: 27, //\n    arrowUp: 38, //\n    arrowDown: 40, //\n};\nexport const WCS_ERROR = {\n    keyframeIsRequiredError: 'A key frame is required after configure() or flush()',\n    canNotDecodeClosedCodec: \"Cannot call 'decode' on a closed codec\",\n};\n\n\nexport const FETCH_ERROR = {\n    abortError1: 'The user aborted a request',\n    abortError2: 'AbortError',\n    abort: 'AbortError',\n};\n"],"names":["PLAYER_PLAY_PROTOCOL","websocket","fetch","webrtc","DEMUX_TYPE","flv","m7s","FILE_SUFFIX","mp4","webm","MEDIA_SOURCE_UPDATE_END_TIMEOUT","DEFAULT_PLAYER_OPTIONS","videoBuffer","videoBufferDelay","isResize","isFullResize","isFlv","debug","hotKey","loadingTimeout","heartTimeout","timeout","loadingTimeoutReplay","heartTimeoutReplay","loadingTimeoutReplayTimes","heartTimeoutReplayTimes","supportDblclickFullscreen","showBandwidth","keepScreenOn","isNotMute","hasAudio","hasVideo","operateBtns","fullscreen","screenshot","play","audio","record","controlAutoHide","hasControl","loadingText","background","decoder","url","rotate","forceNoOffscreen","hiddenAutoPause","protocol","demuxType","useWCS","wcsUseVideoRender","useMSE","useOffscreen","autoWasm","wasmDecodeErrorReplay","openWebglAlignment","wasmDecodeAudioSyncVideo","recordType","useWebFullScreen","WORKER_CMD_TYPE","init","initVideo","render","playAudio","initAudio","kBps","decode","audioCode","videoCode","wasmError","WASM_ERROR","invalidNalUnitSize","MEDIA_TYPE","video","FLV_MEDIA_TYPE","WORKER_SEND_TYPE","audioDecode","videoDecode","close","updateConfig","EVENTS","webFullscreen","decoderWorkerInit","playing","pause","mute","load","loading","videoInfo","timeUpdate","audioInfo","log","error","delayTimeout","stats","performance","recording","recordingTimestamp","recordStart","recordEnd","recordCreateError","buffer","videoFrame","start","metadata","resize","streamEnd","streamSuccess","streamMessage","streamError","volumechange","destroy","mseSourceOpen","mseSourceClose","mseSourceBufferError","mseSourceBufferBusy","mseSourceBufferFull","videoWaiting","videoTimeUpdate","videoSyncAudio","playToRenderTimes","JESSIBUCA_EVENTS","EVENTS_ERROR","playError","fetchError","websocketError","webcodecsH265NotSupport","webcodecsDecodeError","webcodecsWidthOrHeightChange","mediaSourceH265NotSupport","mediaSourceFull","mediaSourceAppendBufferError","mediaSourceBufferListLarge","mediaSourceAppendBufferEndTimeout","wasmDecodeError","webglAlignmentError","WEBSOCKET_STATUS","notConnect","open","BUFFER_STATUS","empty","buffering","full","SCREENSHOT_TYPE","download","base64","blob","VIDEO_ENC_TYPE","VIDEO_ENC_CODE","h264","h265","AUDIO_ENC_TYPE","H265_NAL_TYPE","vps","sps","pps","CONTROL_HEIGHT","SCALE_MODE_TYPE","auto","fullAuto","CANVAS_RENDER_TYPE","webcodecs","webgl","offscreen","ENCODED_VIDEO_TYPE","key","delta","MP4_CODECS","avc","hev","MEDIA_SOURCE_STATE","ended","closed","FRAG_DURATION","Math","ceil","AUDIO_SYNC_VIDEO_DIFF","HOT_KEY","esc","arrowUp","arrowDown","WCS_ERROR","keyframeIsRequiredError","canNotDecodeClosedCodec","FETCH_ERROR","abortError1","abortError2","abort"],"mappings":"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"}